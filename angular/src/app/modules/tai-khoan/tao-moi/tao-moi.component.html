<div class="wrapper wrapper-content animated fadeInRight">
  <div class="ibox">
    <div class="ibox-title">
      <h5>Tạo Mới</h5>
      <div class="ibox-tools">
        <a class="btn btn-xs btn-success m-r-lg" href="/assets/SoYeuLyLich.xlsx">
          Tải tập tin mẫu
        </a>
      </div>
    </div>
    <div class="ibox-content {{isLoading ? 'sk-loading' : null}}">
      <div class="sk-spinner sk-spinner-three-bounce">
        <div class="sk-bounce1"></div>
        <div class="sk-bounce2"></div>
        <div class="sk-bounce3"></div>
      </div>
      <div class="mdl-card mdl-shadow--2dp">
        <div class="mdl-card__supporting-text">
          <div class="mdl-stepper-horizontal-alternative">
            <div class="mdl-stepper-step {{getActiveStep(1)}}">
              <div class="mdl-stepper-circle"><span>1</span>
              </div>
              <div class="mdl-stepper-title">Chọn Tập Tin</div>
              <div class="mdl-stepper-bar-left"></div>
              <div class="mdl-stepper-bar-right"></div>
            </div>
            <div class="mdl-stepper-step {{getActiveStep(2)}} ">
              <div class="mdl-stepper-circle"><span>2</span>
              </div>
              <div class="mdl-stepper-title">Xác Nhận</div>
              <div class="mdl-stepper-bar-left"></div>
              <div class="mdl-stepper-bar-right"></div>
            </div>
            <div class="mdl-stepper-step {{getActiveStep(3)}} ">
              <div class="mdl-stepper-circle"><span>2</span>
              </div>
              <div class="mdl-stepper-title">Tạo Mới & Xuất Dữ Liệu</div>
              <div class="mdl-stepper-bar-left"></div>
              <div class="mdl-stepper-bar-right"></div>
            </div>
          </div>
        </div>
      </div>
      <div [ngSwitch]="current">
        <div *ngSwitchCase="1">
          <form class="row form-hsorizontal">
            <div class="form-group col-sm-offset-4 col-sm-4">
              <input #fileInput type="file" class="m-center" />
            </div>
          </form>
        </div>
        <div *ngSwitchCase="2">
          <div class="table-responsive">
            <table class="table table-striped table-bordered table-hover">
              <thead>
                <tr>
                  <th class="text-center">#</th>
                  <th>Lớp</th>
                  <th>Tên Thánh</th>
                  <th>Họ và Tên</th>
                  <th>Giới Tính</th>
                  <th>Loại Tài Khoản</th>
                  <th>Ngày Sinh</th>
                  <th>Ngày Rửa Tội</th>
                  <th>Ngày Rước Lễ</th>
                  <th>Ngày Thêm Sức</th>
                  <th>Điện Thoại</th>
                  <th>Địa Chỉ</th>
                </tr>
              </thead>
              <tbody *ngIf="dataArr">
                <tr *ngFor="let _item of dataArr | paginate: dataArrPaging; let _i = index">
                  <td class="text-center">
                    {{((dataArrPaging.currentPage - 1) * dataArrPaging.itemsPerPage ) + _i + 1}}
                  </td>
                  <td>{{_item.lop_hoc_ten}}</td>
                  <td>{{_item.ten_thanh}}</td>
                  <td>{{_item.ho_va_ten}}</td>
                  <td>{{_item.gioi_tinh | gioiTinh}}</td>
                  <td>{{_item.loai_tai_khoan | loaiTK}}</td>
                  <td>{{_item.ngay_sinh | ngay}}</td>
                  <td>{{_item.ngay_rua_toi | ngay}}</td>
                  <td>{{_item.ngay_ruoc_le | ngay}}</td>
                  <td>{{_item.ngay_them_suc | ngay}}</td>
                  <td>{{_item.dien_thoai}}</td>
                  <td>{{_item.dia_chi}}</td>
                </tr>
              </tbody>
            </table>
          </div>
          <pagination-template #ep="paginationApi" [id]="dataArrPaging.id" (pageChange)="dataArrPaging.currentPage = $event;">
            <div class="text-center">
              <div class="btn-group">
                <button *ngIf="ep.isFirstPage()" type="button" class="btn btn-sm btn-white disabled"><i class="fa fa-chevron-left"></i></button>
                <button (click)="ep.previous()" *ngIf="!ep.isFirstPage()" type="button" class="btn btn-sm btn-white"><i class="fa fa-chevron-left"></i></button>
                <ng-container *ngFor="let page of ep.pages">
                  <button *ngIf="ep.getCurrent() !== page.value" (click)="ep.setCurrent(page.value)" class="btn btn-sm btn-white">{{ page.label }}</button>
                  <button *ngIf="ep.getCurrent() === page.value" class="btn btn-sm btn-white active">{{ page.label }}</button>
                </ng-container>
                <button *ngIf="ep.isLastPage()" type="button" class="btn btn-sm btn-white disabled"><i class="fa fa-chevron-right"></i></button>
                <button (click)="ep.next()" *ngIf="!ep.isLastPage()" type="button" class="btn btn-sm btn-white"><i class="fa fa-chevron-right"></i></button>
              </div>
            </div>
          </pagination-template>
        </div>
        <div *ngSwitchCase="3">
          <div class="table-responsive">
            <table class="table table-striped table-bordered table-hover">
              <thead>
                <tr>
                  <th class="text-center">#</th>
                  <th>Mã số</th>
                  <th>Lớp</th>
                  <th>Tên Thánh</th>
                  <th>Họ và Tên</th>
                  <th>Giới Tính</th>
                  <th>Loại Tài Khoản</th>
                  <th>Ngày Sinh</th>
                  <th>Ngày Rửa Tội</th>
                  <th>Ngày Rước Lễ</th>
                  <th>Ngày Thêm Sức</th>
                  <th>Điện Thoại</th>
                  <th>Địa Chỉ</th>
                </tr>
              </thead>
              <tbody *ngIf="resultArr">
                <tr *ngFor="let _item of resultArr | paginate: resultArrPaging; let _i = index">
                  <td class="text-center">
                    {{((resultArrPaging.currentPage - 1) * resultArrPaging.itemsPerPage ) + _i + 1}}
                  </td>
                  <td>{{_item.id}}</td>
                  <td>{{_item.lop_hoc_ten}}</td>
                  <td>{{_item.ten_thanh}}</td>
                  <td>{{_item.ho_va_ten}}</td>
                  <td>{{_item.gioi_tinh | gioiTinh}}</td>
                  <td>{{_item.loai_tai_khoan | loaiTK}}</td>
                  <td>{{_item.ngay_sinh | ngay}}</td>
                  <td>{{_item.ngay_rua_toi | ngay}}</td>
                  <td>{{_item.ngay_ruoc_le | ngay}}</td>
                  <td>{{_item.ngay_them_suc | ngay}}</td>
                  <td>{{_item.dien_thoai}}</td>
                  <td>{{_item.dia_chi}}</td>
                </tr>
              </tbody>
            </table>
          </div>
          <pagination-template #ep="paginationApi" [id]="resultArrPaging.id" (pageChange)="resultArrPaging.currentPage = $event;">
            <div class="text-center">
              <div class="btn-group">
                <button *ngIf="ep.isFirstPage()" type="button" class="btn btn-sm btn-white disabled"><i class="fa fa-chevron-left"></i></button>
                <button (click)="ep.previous()" *ngIf="!ep.isFirstPage()" type="button" class="btn btn-sm btn-white"><i class="fa fa-chevron-left"></i></button>
                <ng-container *ngFor="let page of ep.pages">
                  <button *ngIf="ep.getCurrent() !== page.value" (click)="ep.setCurrent(page.value)" class="btn btn-sm btn-white">{{ page.label }}</button>
                  <button *ngIf="ep.getCurrent() === page.value" class="btn btn-sm btn-white active">{{ page.label }}</button>
                </ng-container>
                <button *ngIf="ep.isLastPage()" type="button" class="btn btn-sm btn-white disabled"><i class="fa fa-chevron-right"></i></button>
                <button (click)="ep.next()" *ngIf="!ep.isLastPage()" type="button" class="btn btn-sm btn-white"><i class="fa fa-chevron-right"></i></button>
              </div>
            </div>
          </pagination-template>
        </div>
      </div>
    </div>
    <div class="ibox-footer" *ngIf="!isLoading">
      <a *ngIf="current > 1 && current < totalStep" (click)="prevStep()" class="btn btn-w-m btn-primary btn-sm">
        <i class="fa fa-arrow-left"></i>
        Quay lại
      </a>
      <button *ngIf="current === 1" (click)="addFile()" class="btn btn-w-m btn-primary btn-sm">
        Tiếp tục
        <i class="fa fa-arrow-right"></i>
      </button>
      <button *ngIf="current === 2" (click)="taoTaiKhoan()" class="btn btn-w-m btn-primary btn-sm">
        Tiếp tục
        <i class="fa fa-arrow-right"></i>
      </button>
      <button *ngIf="current === totalStep" (click)="restart()" class="btn btn-w-m btn-primary btn-sm">
        Thêm mới
      </button>
    </div>
  </div>
</div>